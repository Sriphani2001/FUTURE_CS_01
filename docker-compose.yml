services:
  juice-shop:
    image: bkimminich/juice-shop:latest
    container_name: juice-shop
    ports:
      - "3000:3000"
    restart: unless-stopped
    volumes:
      - ./juice_data:/data

  # ZAP: use the new/published zap image name
  zap:
    image: zaproxy/zap-stable:latest
    container_name: zap
    command:
      - zap.sh
      - -daemon
      - -host
      - "0.0.0.0"
      - -port
      - "8080"
      - -config
      - "api.disablekey=true"
    ports:
      - "8080:8080"
    volumes:
      - ./evidence/zap-reports:/zap/wrk
    restart: unless-stopped

  sqlmap:
    image: sqlmapproject/sqlmap:latest
    container_name: sqlmap
    tty: true
    stdin_open: true
    volumes:
      - ./evidence/sqlmap-results:/root/.sqlmap
    entrypoint: ["/bin/sh", "-c"]
    command: ["while true; do sleep 60; done"]
    restart: "no"
